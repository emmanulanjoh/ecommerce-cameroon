version: 1.0
runtime: nodejs18
build:
  commands:
    build:
      - npm install
      - cd client && npm install && npm run build
      - ls -la client/build/static/ || echo "No static files"
      - npm run build
run:
  runtime-version: 18.20.8
  command: npm start
  network:
    port: 5000
    env: PORT
  env:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: "5000"
    - name: MONGODB_URI
      value: "mongodb+srv://emma:Emma2018@cluster0.jff9i.mongodb.net/ecommerce_cameroon?retryWrites=true&w=majority&appName=ecommerce-cameroon"
    - name: JWT_SECRET
      value: "klnjgdskj59e4kln94ejbwklbrbjkboi4h43hb34boh34909u6ikrnlsdnelnhgoh54b5nioerlkngoipjgpj95j34kjpe45je45jr65j9yokn5rin6lrnknr6"
    - name: SESSION_SECRET
      value: "gytfrdesawq34dcf6gty879tf@34iKojij"
    - name: TRUST_PROXY
      value: "true"
    - name: ADMIN_EMAIL
      value: "emmanuelanjoh2016@gmail.com"
    - name: ADMIN_PASSWORD
      value: "rwgm vlvg nxgp yezv"
    - name: EMAIL_HOST
      value: "smtp.gmail.com"
    - name: EMAIL_PORT
      value: "587"
    - name: EMAIL_USER
      value: "emmanuelanjoh2016@gmail.com"
    - name: EMAIL_PASS
      value: "rwgm vlvg nxgp yezv"
    - name: EMAIL_FROM
      value: "emmanuelanjoh2016@gmail.com"
    - name: BUSINESS_WHATSAPP_NUMBER
      value: "+237678830036"
    - name: BUSINESS_NAME
      value: "Findall sourcing"
    - name: BUSINESS_ADDRESS
      value: "Mimboman petit marche, Yaound√©, Cameroon"
    - name: BUSINESS_PHONE
      value: "+237678830036"
    - name: BUSINESS_EMAIL
      value: "emmanuelanjoh2016@gmail.com"
    - name: GOOGLE_CLIENT_ID
      value: "303871422282-4l991nmnfkopvpcf8tlub9948ra1dkvm.apps.googleusercontent.com"
    - name: GOOGLE_CLIENT_SECRET
      value: "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"
    - name: GOOGLE_REDIRECT_URI
      value: "https://mvpm3erbja.us-east-1.awsapprunner.com/api/auth/google/callback"
    - name: CLIENT_URL
      value: "https://d35ew0puu9c5cz.cloudfront.net"
    - name: APP_URL
      value: "https://mvpm3erbja.us-east-1.awsapprunner.com"
    - name: MAX_FILE_SIZE
      value: "5242880"
    - name: UPLOAD_PATH
      value: "./public/uploads"
    - name: DEFAULT_LANGUAGE
      value: "en"
    - name: SUPPORTED_LANGUAGES
      value: "en,fr"